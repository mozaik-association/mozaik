<?xml version="1.0" encoding="utf-8" ?>
<!-- Copyright 2021 ACSONE SA/NV
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl). -->
<odoo>


   <record id="survey_survey_rule_read_write_user" model="ir.rule">
        <field name="name">
            Survey: read and write on public surveys or private surveys with child int_instance_id</field>
        <field name="model_id" ref="model_survey_survey" />
        <field name="domain_force">['|',('is_private','=',False),
            ('int_instance_id', 'child_of', user.partner_id.int_instance_id.id)]</field>
        <field name="groups" eval="[(4, ref('survey.group_survey_user'))]" />
        <field name="perm_read" eval="True" />
        <field name="perm_write" eval="True" />
        <field name="perm_create" eval="False" />
        <field name="perm_unlink" eval="False" />
   </record>

    <record id="survey_question_rule_read_write_user" model="ir.rule">
        <field name="name">
            Survey question: read and write questions related to public surveys or private surveys with child int_instance_id</field>
        <field name="model_id" ref="model_survey_question" />
        <field name="domain_force">['|',('is_private','=',False),
            ('int_instance_id', 'child_of', user.partner_id.int_instance_id.id)]</field>
        <field name="groups" eval="[(4, ref('survey.group_survey_user'))]" />
        <field name="perm_read" eval="True" />
        <field name="perm_write" eval="True" />
        <field name="perm_create" eval="False" />
        <field name="perm_unlink" eval="False" />
   </record>

    <record id="survey_question_answer_rule_read_write_user" model="ir.rule">
        <field name="name">
            Survey question answer: read and write answers related to public surveys or private surveys with child int_instance_id</field>
        <field name="model_id" ref="model_survey_question_answer" />
        <field name="domain_force">['|',('is_private','=',False),
            ('int_instance_id', 'child_of', user.partner_id.int_instance_id.id)]</field>
        <field name="groups" eval="[(4, ref('survey.group_survey_user'))]" />
        <field name="perm_read" eval="True" />
        <field name="perm_write" eval="True" />
        <field name="perm_create" eval="False" />
        <field name="perm_unlink" eval="False" />
   </record>

    <record id="survey_user_input_rule_read_write_user" model="ir.rule">
        <field name="name">
            Survey user input: read and write user inputs related to public surveys or private surveys with child int_instance_id</field>
        <field name="model_id" ref="model_survey_user_input" />
        <field name="domain_force">['|',('is_private','=',False),
            ('int_instance_id', 'child_of', user.partner_id.int_instance_id.id)]</field>
        <field name="groups" eval="[(4, ref('survey.group_survey_user'))]" />
        <field name="perm_read" eval="True" />
        <field name="perm_write" eval="True" />
        <field name="perm_create" eval="False" />
        <field name="perm_unlink" eval="False" />
   </record>

    <record id="survey_user_input_line_rule_read_write_user" model="ir.rule">
        <field name="name">
            Survey user input line: read and write user input lines related to public surveys or private surveys with child int_instance_id</field>
        <field name="model_id" ref="model_survey_user_input_line" />
        <field name="domain_force">['|',('is_private','=',False),
            ('int_instance_id', 'child_of', user.partner_id.int_instance_id.id)]</field>
        <field name="groups" eval="[(4, ref('survey.group_survey_user'))]" />
        <field name="perm_read" eval="True" />
        <field name="perm_write" eval="True" />
        <field name="perm_create" eval="False" />
        <field name="perm_unlink" eval="False" />
   </record>


</odoo>
